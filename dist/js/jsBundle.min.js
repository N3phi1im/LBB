!function(){"use strict";function e(e,t){e.state("Home",{url:"/",templateUrl:"views/Home.html"}).state("Register",{url:"/Register",templateUrl:"views/register.html"}).state("Login",{url:"/Login",templateUrl:"views/login.html"}).state("Cat",{url:"/Cat",templateUrl:"views/cat.html"}).state("Style",{url:"/Style",templateUrl:"views/style.html"}).state("Profile",{url:"/Profile",templateUrl:"views/profile.html"}).state("Beer",{url:"/Beer",templateUrl:"views/beer_profile.html"}).state("Profile_beer",{url:"/Profile_beer",templateUrl:"views/profile_selected_beer.html"}),t.otherwise("/")}angular.module("app",["ui.router","ui.bootstrap"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t,r,o){var n=this;n.grabbed=r.grabbed,n.beers={},n.grab=function(e){n.beers.id=e,r.grab(n.beers).then(function(){o.go("Beer")})}}angular.module("app").controller("BeerController",e),e.$inject=["HomeFactory","UserFactory","BeerFactory","$state"]}(),function(){"use strict";function e(e,t,r,o){function n(e){r.searchBeer(e).then(function(){})}function s(){r.getCategory().then(function(){o.go("Cat")})}function a(){r.getStyle().then(function(){o.go("Style")})}function u(){o.go("Home")}var i=this;i.search=n,i.getCategory=s,i.getStyle=a,i.results=r.results,i.cats=r.cats,i.styles=r.styles,i.goHome=u}angular.module("app").controller("HomeController",e),e.$inject=["HomeFactory","UserFactory","BeerFactory","$state"]}(),function(){"use strict";function e(e,t,r,o){function n(){var t=u.user;return t.username&&t.email&&t.password&&t.cpassword&&t.password===t.cpassword?void e.register(t).then(function(){u.user={},r.go("Profile")}):(o.alert("Please fill all fields!"),!1)}function s(){e.login(u.user).then(function(){u.user={},r.go("Profile")})}function a(){t.beer_had.length=0,t.beer_want.length=0,e.logout()}var u=this;u.user={},u.status=e.status,u.register=n,u.login=s,u.logout=a}angular.module("app").controller("IndexController",e),e.$inject=["UserFactory","ProfileFactory","$state","$window"]}(),function(){"use strict";function e(e,t,r,o,n){function s(e){o.add_had(e).then(function(){n.go("Profile")})}function a(e){o.add_want(e).then(function(){n.go("Home")})}function u(e){i.beers.id=e,o.grab(i.beers).then(function(){n.go("Profile_beer")})}var i=this;i.beer_had=o.beer_had,i.beer_want=o.beer_want,i.add_had=s,i.add_want=a,i.grab=u,i.grabbed=o.grabbed,o.getbeerhad(),o.getbeerwant()}angular.module("app").controller("ProfileController",e),e.$inject=["HomeFactory","UserFactory","BeerFactory","ProfileFactory","$state"]}(),function(){"use strict";function e(e,t){function r(r){var o=t.defer();return e.post("/api/Beer/searchBeer",r).success(function(e){a.results.length=0;for(var t=0;t<e.length;t++)a.results.push(e[t]),o.resolve()}),o.promise}function o(r){var o=t.defer();return e.post("/api/Beer/grab",r).success(function(e){a.grabbed.length=0,e&&(a.grabbed.push(e),o.resolve())}),o.promise}function n(){var r=t.defer();return e.post("/api/Beer/Category").success(function(e){a.cats.length=0;for(var t=0;13>=t;t++)a.cats.push(e[t]),r.resolve()}),r.promise}function s(){var r=t.defer();return e.post("/api/Beer/Style").success(function(e){a.styles.length=0;for(var t=0;t<e.length;t++)a.styles.push(e[t]),r.resolve()}),r.promise}var a={};return a.results=[],a.grabbed=[],a.cats=[],a.styles=[],a.searchBeer=r,a.grab=o,a.getCategory=n,a.getStyle=s,a}angular.module("app").factory("BeerFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t){var r={};return r}angular.module("app").factory("HomeFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t){function r(r){var o=t.defer();return e.post("/api/beers/beer_had",r,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).success(function(e){r._id=e.id,r.dateHad=new Date,s.beer_had.push(r),o.resolve()}).error(function(e){console.error("YOU DONE MESSED UP! A A RON!"),o.reject(e)}),o.promise}function o(){e.get("/api/beers/beer_had",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).success(function(e){for(var t=0;t<e.length;t++)e[t].dateHad=new Date(e[t].dateHad),s.beer_had.push(e[t])})}function n(){e.get("/api/beers/beer_want").success(function(e){for(var t=0;t<e.length;t++)s.beer_want.push(e[t])})}var s={};return s.beer_had=[],s.beer_want=[],s.grabbed=[],s.add_had=r,s.getbeerhad=o,s.getbeerwant=n,s}angular.module("app").factory("ProfileFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,r){function o(r){var o=t.defer();return e.post("/api/Users/Register",r).success(function(e){a(e.token),c.status.isLoggedIn=!0,o.resolve()}),o.promise}function n(r){var o={username:r.username.toLowerCase(),password:r.password},n=t.defer();return e.post("/api/Users/Login",o).success(function(e){a(e.token),c.status.isLoggedIn=!0,n.resolve()}),n.promise}function s(){c.status.isLoggedIn=!1,i(),r.go("Login")}function a(e){localStorage.setItem("token",e),c.status.username=l()}function u(){return localStorage.token}function i(){localStorage.removeItem("token"),c.status.username=null}function l(){return JSON.parse(atob(u().split(".")[1])).username}var c={};return c.status={},u()&&(c.status.isLoggedIn=!0,c.status.username=l()),c.setToken=a,c.getToken=u,c.removeToken=i,c.register=o,c.login=n,c.logout=s,c}angular.module("app").factory("UserFactory",e),e.$inject=["$http","$q","$state"]}();